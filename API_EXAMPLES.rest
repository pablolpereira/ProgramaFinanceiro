# API_EXAMPLES.rest - Exemplos de Requisi√ß√µes HTTP

Arquivo com exemplos de requisi√ß√µes para testar a API do Finance System.
Use em REST Client (VSCode) ou importe no Postman.

## üîß Configura√ß√£o

```
@host = http://localhost:3000/api
@contentType = application/json
```

---

## üë§ USU√ÅRIOS

### Criar Novo Usu√°rio
```http
POST {{ host }}/users
Content-Type: {{ contentType }}

{
  "name": "Jo√£o Silva",
  "email": "joao@example.com",
  "gross_salary": 5000.00
}
```

**Resposta (201):**
```json
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "name": "Jo√£o Silva",
  "email": "joao@example.com",
  "gross_salary": 5000.00,
  "created_at": "2024-02-15T10:30:00.000Z"
}
```

---

### Listar Todos os Usu√°rios
```http
GET {{ host }}/users
Content-Type: {{ contentType }}
```

**Resposta (200):**
```json
[
  {
    "id": "550e8400-e29b-41d4-a716-446655440000",
    "name": "Jo√£o Silva",
    "email": "joao@example.com",
    "gross_salary": 5000.00,
    "created_at": "2024-02-15T10:30:00.000Z"
  }
]
```

---

### Obter Usu√°rio por ID
```http
GET {{ host }}/users/550e8400-e29b-41d4-a716-446655440000
Content-Type: {{ contentType }}
```

**Resposta (200):**
```json
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "name": "Jo√£o Silva",
  "email": "joao@example.com",
  "gross_salary": 5000.00,
  "created_at": "2024-02-15T10:30:00.000Z"
}
```

---

### Atualizar Usu√°rio
```http
PUT {{ host }}/users/550e8400-e29b-41d4-a716-446655440000
Content-Type: {{ contentType }}

{
  "name": "Jo√£o Silva Santos",
  "gross_salary": 6000.00
}
```

**Resposta (200):**
```json
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "name": "Jo√£o Silva Santos",
  "email": "joao@example.com",
  "gross_salary": 6000.00,
  "created_at": "2024-02-15T10:30:00.000Z"
}
```

---

### Deletar Usu√°rio
```http
DELETE {{ host }}/users/550e8400-e29b-41d4-a716-446655440000
Content-Type: {{ contentType }}
```

**Resposta (204):** Sem conte√∫do

---

## üí∏ DESPESAS

### Criar Despesa
```http
POST {{ host }}/expenses
Content-Type: {{ contentType }}

{
  "user_id": "550e8400-e29b-41d4-a716-446655440000",
  "description": "Almo√ßo no restaurante",
  "amount": 45.50,
  "expense_type": "CREDIT_CARD",
  "category": "Alimenta√ß√£o",
  "expense_date": "2024-02-15"
}
```

**Resposta (201):**
```json
{
  "id": "660e8400-e29b-41d4-a716-446655440001",
  "user_id": "550e8400-e29b-41d4-a716-446655440000",
  "description": "Almo√ßo no restaurante",
  "amount": 45.50,
  "expense_type": "CREDIT_CARD",
  "category": "Alimenta√ß√£o",
  "expense_date": "2024-02-15",
  "created_at": "2024-02-15T11:00:00.000Z"
}
```

---

### Listar Despesas com Filtro
```http
GET {{ host }}/expenses?userId=550e8400-e29b-41d4-a716-446655440000&month=2&year=2024
Content-Type: {{ contentType }}
```

**Resposta (200):**
```json
[
  {
    "id": "660e8400-e29b-41d4-a716-446655440001",
    "user_id": "550e8400-e29b-41d4-a716-446655440000",
    "description": "Almo√ßo no restaurante",
    "amount": 45.50,
    "expense_type": "CREDIT_CARD",
    "category": "Alimenta√ß√£o",
    "expense_date": "2024-02-15",
    "created_at": "2024-02-15T11:00:00.000Z"
  }
]
```

---

### Obter Despesa por ID
```http
GET {{ host }}/expenses/660e8400-e29b-41d4-a716-446655440001
Content-Type: {{ contentType }}
```

**Resposta (200):**
```json
{
  "id": "660e8400-e29b-41d4-a716-446655440001",
  "user_id": "550e8400-e29b-41d4-a716-446655440000",
  "description": "Almo√ßo no restaurante",
  "amount": 45.50,
  "expense_type": "CREDIT_CARD",
  "category": "Alimenta√ß√£o",
  "expense_date": "2024-02-15",
  "created_at": "2024-02-15T11:00:00.000Z"
}
```

---

### Atualizar Despesa
```http
PUT {{ host }}/expenses/660e8400-e29b-41d4-a716-446655440001
Content-Type: {{ contentType }}

{
  "description": "Almo√ßo executivo",
  "amount": 65.00
}
```

**Resposta (200):**
```json
{
  "id": "660e8400-e29b-41d4-a716-446655440001",
  "user_id": "550e8400-e29b-41d4-a716-446655440000",
  "description": "Almo√ßo executivo",
  "amount": 65.00,
  "expense_type": "CREDIT_CARD",
  "category": "Alimenta√ß√£o",
  "expense_date": "2024-02-15",
  "created_at": "2024-02-15T11:00:00.000Z"
}
```

---

### Deletar Despesa
```http
DELETE {{ host }}/expenses/660e8400-e29b-41d4-a716-446655440001
Content-Type: {{ contentType }}
```

**Resposta (204):** Sem conte√∫do

---

## üìä RELAT√ìRIOS

### Resumo de Despesas
```http
GET {{ host }}/reports/summary?userId=550e8400-e29b-41d4-a716-446655440000&month=2&year=2024
Content-Type: {{ contentType }}
```

**Resposta (200):**
```json
{
  "user": {
    "id": "550e8400-e29b-41d4-a716-446655440000",
    "name": "Jo√£o Silva",
    "gross_salary": 5000.00
  },
  "summary": {
    "total_expenses": 450.00,
    "credit_card_total": 200.00,
    "monthly_total": 150.00,
    "pix_debit_total": 100.00
  },
  "categories": {
    "Alimenta√ß√£o": {
      "total": 180.00,
      "count": 4,
      "items": [
        { "description": "Almo√ßo", "amount": 45.50 },
        { "description": "Cafe da manha", "amount": 25.00 }
      ]
    }
  },
  "comparison": {
    "remaining": 4550.00,
    "percentage_committed": 9.0
  }
}
```

---

### Despesas por Tipo
```http
GET {{ host }}/reports/by-type?userId=550e8400-e29b-41d4-a716-446655440000&month=2&year=2024
Content-Type: {{ contentType }}
```

**Resposta (200):**
```json
{
  "CREDIT_CARD": {
    "total": 200.00,
    "count": 3,
    "percentage": 44.44
  },
  "MONTHLY": {
    "total": 150.00,
    "count": 2,
    "percentage": 33.33
  },
  "PIX_DEBIT": {
    "total": 100.00,
    "count": 1,
    "percentage": 22.22
  }
}
```

---

### Hist√≥rico Mensal
```http
GET {{ host }}/reports/monthly-history?userId=550e8400-e29b-41d4-a716-446655440000&year=2024
Content-Type: {{ contentType }}
```

**Resposta (200):**
```json
{
  "year": 2024,
  "months": [
    {
      "month": 1,
      "month_name": "janeiro",
      "total": 350.00,
      "count": 5
    },
    {
      "month": 2,
      "month_name": "fevereiro",
      "total": 450.00,
      "count": 8
    },
    {
      "month": 3,
      "month_name": "mar√ßo",
      "total": 400.00,
      "count": 6
    }
  ],
  "total_year": 1200.00,
  "average_month": 400.00
}
```

---

## ‚ùå C√ìDIGOS DE ERRO

### 400 Bad Request
```json
{
  "error": "Dados inv√°lidos",
  "details": "Email j√° cadastrado"
}
```

### 404 Not Found
```json
{
  "error": "Recurso n√£o encontrado",
  "details": "Usu√°rio com ID 123 n√£o existe"
}
```

### 500 Internal Server Error
```json
{
  "error": "Erro interno do servidor",
  "details": "Erro ao conectar ao banco de dados"
}
```

---

## üìù Notas

- Todos os timestamps est√£o em ISO 8601
- UUIDs s√£o strings em formato padr√£o
- Valores monet√°rios s√£o DECIMAL com 2 casas
- Datas est√£o em formato YYYY-MM-DD
- Altere `@host` se o backend rod–∞—Ä em porta diferente

## üß™ Importar no Postman

1. Copie o conte√∫do deste arquivo
2. Abra Postman
3. Clique em "Import" ‚Üí "Raw text"
4. Cole o conte√∫do
5. Clique em "Import"

---

**Finance System - Exemplos de API | 2024**
